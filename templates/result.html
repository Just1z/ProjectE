{% extends "base.html" %}

{% block content %}
<div class="starter-template text-center py-5 px-3" style="margin-top: 20px;">
    <h2>Результаты</h2>
    <b>Первичных баллов: {{primary_points}}. В соответствии со шкалой перевода баллов 2022 года: {{secondary_points}} из 100.</b>
    <table>
        <tr>
            <th style="text-align: center; font-weight: bold;">Номер задания</th>
            <th style="text-align: center; font-weight: bold;">Правильный ответ</th>
            <th style="text-align: center; font-weight: bold;">Ваш ответ</th>
        </tr>
        {% for right_answer in right_answers %}
        <tr class="user_results">
            <td style="text-align: center;">{{loop.index}}</td>
            <script>
                document.write(`<td style="text-align: center;">{{right_answer|safe}}</td>`);
                var answers = localStorage.getItem('answers');
                if (!answers) {
                    document.write(`<td style="text-align: center; background-color: #696969">Нет ответа</td>`);
                } else {
                    var answer = answers.split(",")[{{loop.index0}}];
                    var color = "";
                    if (answer.length) {
                        if (answer == `{{right_answer|safe}}`) {
                            color = "#00FF7F";
                        } else {
                            color = "#FF4940";
                        };
                    } else {
                        color = "#696969";
                        answer = "Нет ответа";
                    }
                    document.write(`<td style="text-align: center; background-color: ${color}">${answer}</td>`);
                }
            </script>
        </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}
